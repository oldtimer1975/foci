{"dependencies":[{"name":"../datasources/footballtxt","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":85},"end":{"line":2,"column":62,"index":147}}],"key":"gfUfMGGJ+6lHVaVsRNL/OdQdTjU=","exportNames":["*"],"imports":1}},{"name":"./poisson","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":148},"end":{"line":3,"column":87,"index":235}}],"key":"YUm9CUU8IyfOHPAbmBZMTHmUfnA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.runAlgoritmus = runAlgoritmus;\n  var _datasourcesFootballtxt = require(_dependencyMap[0], \"../datasources/footballtxt\");\n  var _poisson = require(_dependencyMap[1], \"./poisson\");\n  // Összefogó függvény: TXT meccsadat -> modell -> előrejelzés -> (opcionális) Kelly.\n\n  function runAlgoritmus(rawTxt, homeTeam, awayTeam, market) {\n    var matchesRaw = (0, _datasourcesFootballtxt.parseFootballTxt)(rawTxt);\n    var matches = matchesRaw.map(m => ({\n      homeTeam: m.homeTeam,\n      awayTeam: m.awayTeam,\n      homeGoals: m.homeGoals,\n      awayGoals: m.awayGoals\n    }));\n    var model = (0, _poisson.trainPoissonModel)(matches);\n    var _predict = (0, _poisson.predict)(model, homeTeam, awayTeam),\n      probs = _predict.probs,\n      lambdaHome = _predict.lambdaHome,\n      lambdaAway = _predict.lambdaAway;\n    var fair = (0, _poisson.fairOdds)(probs);\n    var tip = (0, _poisson.mostLikelyTip)(probs);\n    var kellyOut = [];\n    if (market) {\n      kellyOut = [{\n        selection: \"home\",\n        prob: probs.homeWin,\n        odds: market.home,\n        fraction: (0, _poisson.kelly)(probs.homeWin, market.home) * 0.25\n      }, {\n        selection: \"draw\",\n        prob: probs.draw,\n        odds: market.draw,\n        fraction: (0, _poisson.kelly)(probs.draw, market.draw) * 0.25\n      }, {\n        selection: \"away\",\n        prob: probs.awayWin,\n        odds: market.away,\n        fraction: (0, _poisson.kelly)(probs.awayWin, market.away) * 0.25\n      }].filter(v => v.fraction > 0).sort((a, b) => b.fraction - a.fraction);\n    }\n    return {\n      probs,\n      fairOdds: fair,\n      tip,\n      lambdaHome,\n      lambdaAway,\n      kelly: kellyOut\n    };\n  }\n});","lineCount":55,"map":[[7,2,7,0,"exports"],[7,9,7,0],[7,10,7,0,"runAlgoritmus"],[7,23,7,0],[7,26,7,0,"runAlgoritmus"],[7,39,7,0],[8,2,2,0],[8,6,2,0,"_datasourcesFootballtxt"],[8,29,2,0],[8,32,2,0,"require"],[8,39,2,0],[8,40,2,0,"_dependencyMap"],[8,54,2,0],[9,2,3,0],[9,6,3,0,"_poisson"],[9,14,3,0],[9,17,3,0,"require"],[9,24,3,0],[9,25,3,0,"_dependencyMap"],[9,39,3,0],[10,2,1,0],[12,2,7,7],[12,11,7,16,"runAlgoritmus"],[12,24,7,29,"runAlgoritmus"],[12,25,7,30,"rawTxt"],[12,31,7,44],[12,33,7,46,"homeTeam"],[12,41,7,62],[12,43,7,64,"awayTeam"],[12,51,7,80],[12,53,7,82,"market"],[12,59,7,101],[12,61,7,103],[13,4,8,2],[13,8,8,8,"matchesRaw"],[13,18,8,18],[13,21,8,21],[13,25,8,21,"parseFootballTxt"],[13,48,8,37],[13,49,8,37,"parseFootballTxt"],[13,65,8,37],[13,67,8,38,"rawTxt"],[13,73,8,44],[13,74,8,45],[14,4,9,2],[14,8,9,8,"matches"],[14,15,9,15],[14,18,9,18,"matchesRaw"],[14,28,9,28],[14,29,9,29,"map"],[14,32,9,32],[14,33,9,33,"m"],[14,34,9,34],[14,39,9,39],[15,6,10,4,"homeTeam"],[15,14,10,12],[15,16,10,14,"m"],[15,17,10,15],[15,18,10,16,"homeTeam"],[15,26,10,24],[16,6,11,4,"awayTeam"],[16,14,11,12],[16,16,11,14,"m"],[16,17,11,15],[16,18,11,16,"awayTeam"],[16,26,11,24],[17,6,12,4,"homeGoals"],[17,15,12,13],[17,17,12,15,"m"],[17,18,12,16],[17,19,12,17,"homeGoals"],[17,28,12,26],[18,6,13,4,"awayGoals"],[18,15,13,13],[18,17,13,15,"m"],[18,18,13,16],[18,19,13,17,"awayGoals"],[19,4,14,2],[19,5,14,3],[19,6,14,4],[19,7,14,5],[20,4,16,2],[20,8,16,8,"model"],[20,13,16,13],[20,16,16,16],[20,20,16,16,"trainPoissonModel"],[20,28,16,33],[20,29,16,33,"trainPoissonModel"],[20,46,16,33],[20,48,16,34,"matches"],[20,55,16,41],[20,56,16,42],[21,4,17,2],[21,8,17,2,"_predict"],[21,16,17,2],[21,19,17,44],[21,23,17,44,"predict"],[21,31,17,51],[21,32,17,51,"predict"],[21,39,17,51],[21,41,17,52,"model"],[21,46,17,57],[21,48,17,59,"homeTeam"],[21,56,17,67],[21,58,17,69,"awayTeam"],[21,66,17,77],[21,67,17,78],[22,6,17,10,"probs"],[22,11,17,15],[22,14,17,15,"_predict"],[22,22,17,15],[22,23,17,10,"probs"],[22,28,17,15],[23,6,17,17,"lambdaHome"],[23,16,17,27],[23,19,17,27,"_predict"],[23,27,17,27],[23,28,17,17,"lambdaHome"],[23,38,17,27],[24,6,17,29,"lambdaAway"],[24,16,17,39],[24,19,17,39,"_predict"],[24,27,17,39],[24,28,17,29,"lambdaAway"],[24,38,17,39],[25,4,18,2],[25,8,18,8,"fair"],[25,12,18,12],[25,15,18,15],[25,19,18,15,"fairOdds"],[25,27,18,23],[25,28,18,23,"fairOdds"],[25,36,18,23],[25,38,18,24,"probs"],[25,43,18,29],[25,44,18,30],[26,4,19,2],[26,8,19,8,"tip"],[26,11,19,11],[26,14,19,14],[26,18,19,14,"mostLikelyTip"],[26,26,19,27],[26,27,19,27,"mostLikelyTip"],[26,40,19,27],[26,42,19,28,"probs"],[26,47,19,33],[26,48,19,34],[27,4,21,2],[27,8,21,6,"kellyOut"],[27,16,21,103],[27,19,21,106],[27,21,21,108],[28,4,22,2],[28,8,22,6,"market"],[28,14,22,12],[28,16,22,14],[29,6,23,4,"kellyOut"],[29,14,23,12],[29,17,23,15],[29,18,24,6],[30,8,24,8,"selection"],[30,17,24,17],[30,19,24,19],[30,25,24,25],[31,8,24,27,"prob"],[31,12,24,31],[31,14,24,33,"probs"],[31,19,24,38],[31,20,24,39,"homeWin"],[31,27,24,46],[32,8,24,48,"odds"],[32,12,24,52],[32,14,24,54,"market"],[32,20,24,60],[32,21,24,61,"home"],[32,25,24,65],[33,8,24,67,"fraction"],[33,16,24,75],[33,18,24,77],[33,22,24,77,"kelly"],[33,30,24,82],[33,31,24,82,"kelly"],[33,36,24,82],[33,38,24,83,"probs"],[33,43,24,88],[33,44,24,89,"homeWin"],[33,51,24,96],[33,53,24,98,"market"],[33,59,24,104],[33,60,24,105,"home"],[33,64,24,109],[33,65,24,110],[33,68,24,113],[34,6,24,118],[34,7,24,119],[34,9,25,6],[35,8,25,8,"selection"],[35,17,25,17],[35,19,25,19],[35,25,25,25],[36,8,25,27,"prob"],[36,12,25,31],[36,14,25,33,"probs"],[36,19,25,38],[36,20,25,39,"draw"],[36,24,25,43],[37,8,25,45,"odds"],[37,12,25,49],[37,14,25,51,"market"],[37,20,25,57],[37,21,25,58,"draw"],[37,25,25,62],[38,8,25,64,"fraction"],[38,16,25,72],[38,18,25,74],[38,22,25,74,"kelly"],[38,30,25,79],[38,31,25,79,"kelly"],[38,36,25,79],[38,38,25,80,"probs"],[38,43,25,85],[38,44,25,86,"draw"],[38,48,25,90],[38,50,25,92,"market"],[38,56,25,98],[38,57,25,99,"draw"],[38,61,25,103],[38,62,25,104],[38,65,25,107],[39,6,25,112],[39,7,25,113],[39,9,26,6],[40,8,26,8,"selection"],[40,17,26,17],[40,19,26,19],[40,25,26,25],[41,8,26,27,"prob"],[41,12,26,31],[41,14,26,33,"probs"],[41,19,26,38],[41,20,26,39,"awayWin"],[41,27,26,46],[42,8,26,48,"odds"],[42,12,26,52],[42,14,26,54,"market"],[42,20,26,60],[42,21,26,61,"away"],[42,25,26,65],[43,8,26,67,"fraction"],[43,16,26,75],[43,18,26,77],[43,22,26,77,"kelly"],[43,30,26,82],[43,31,26,82,"kelly"],[43,36,26,82],[43,38,26,83,"probs"],[43,43,26,88],[43,44,26,89,"awayWin"],[43,51,26,96],[43,53,26,98,"market"],[43,59,26,104],[43,60,26,105,"away"],[43,64,26,109],[43,65,26,110],[43,68,26,113],[44,6,26,118],[44,7,26,119],[44,8,27,5],[44,9,27,6,"filter"],[44,15,27,12],[44,16,27,13,"v"],[44,17,27,14],[44,21,27,18,"v"],[44,22,27,19],[44,23,27,20,"fraction"],[44,31,27,28],[44,34,27,31],[44,35,27,32],[44,36,27,33],[44,37,27,34,"sort"],[44,41,27,38],[44,42,27,39],[44,43,27,40,"a"],[44,44,27,41],[44,46,27,43,"b"],[44,47,27,44],[44,52,27,49,"b"],[44,53,27,50],[44,54,27,51,"fraction"],[44,62,27,59],[44,65,27,62,"a"],[44,66,27,63],[44,67,27,64,"fraction"],[44,75,27,72],[44,76,27,73],[45,4,28,2],[46,4,30,2],[46,11,30,9],[47,6,30,11,"probs"],[47,11,30,16],[48,6,30,18,"fairOdds"],[48,14,30,26],[48,16,30,28,"fair"],[48,20,30,32],[49,6,30,34,"tip"],[49,9,30,37],[50,6,30,39,"lambdaHome"],[50,16,30,49],[51,6,30,51,"lambdaAway"],[51,16,30,61],[52,6,30,63,"kelly"],[52,11,30,68],[52,13,30,70,"kellyOut"],[53,4,30,79],[53,5,30,80],[54,2,31,0],[55,0,31,1],[55,3]],"functionMap":{"names":["<global>","runAlgoritmus","matchesRaw.map$argument_0","filter$argument_0","filter.sort$argument_0"],"mappings":"AAA;OCM;iCCE;IDK;aEa,mBF,OG,iCH;CDI"},"hasCjsExports":false},"type":"js/module"}]}